
<!--<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Location-based AR.js demo</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
       <style>
        #dist {

            z-index: 1000;
            position: fixed;
            top: 0;
            left: 20px;
        }
        
    </style>
  </head>

  <body style="margin: 0; overflow: hidden;">
    <p id="dist">Mon Nov 1</p>
    <a-scene
      vr-mode-ui="enabled: false"
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false;"
    >
      <a-text
        value="This content will always face you."
        look-at="[gps-camera]"
        scale="50 50 50"
        gps-entity-place="longitude: -79.428400; latitude: 43.643151;"
      ></a-text>
      <a-camera gps-camera rotation-reader> </a-camera>
    </a-scene>
  </body>
</html>-->

<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>GeoAR.js demo</title>
    <script src='https://aframe.io/releases/1.2.0/aframe.min.js'></script>
    <!--<script src="https://raw.githack.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
    <script src="assets/aframe-ar.min.js"></script>
    <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>-->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script>
        //THREEx.ArToolkitContext.baseURL = 'https://raw.githack.com/jeromeetienne/ar.js/master/three.js/'
    </script>
    
    <style>
        #dist {

            z-index: 1000;
            position: fixed;
            top: 0;
            left: 20px;
        }

        #extra {

            z-index: 1000;
            position: fixed;
            top: 50px;
            left: 20px;
        }

        .debug {
            z-index: 1000;
            position:  fixed;
            top:  100px;
            left:  20px;
        }
        
    </style>
</head>

<body style='margin: 0; overflow: hidden;'>
    <p id="dist">Test Nov 3</p>
    <p id="extra">Device Orientation data here</p>
    <a-scene
        vr-mode-ui="enabled: false"
		embedded gps-camera-debug 
        arjs='sourceType: webcam; sourceWidth:1280; sourceHeight:960; displayWidth: 1280; displayHeight: 960; debugUIEnabled: false; cameraParametersUrl:assets/camera_para.dat;'>
        
        <a-camera gps-camera="alert: true;" rotation-reader look-controls-enabled='false' arjs-look-controls="smoothingFactor: 0.1"></a-camera>
        <!--<a-entity gltf-model="./assets/magnemite/scene.gltf" rotation="0 180 0" scale="1.0 1.0 1.0" gps-entity-place="longitude: -79.428400; latitude: 43.643151;" animation-mixer></a-entity>-->
        <!--<a-box rotation="0 0 0" scale="1.0 1.0 1.0" gps-entity-place="longitude: -79.428322; latitude: 43.643206;"  color="red"></a-box>
        <a-box rotation="0 0 0" scale="1.0 1.0 1.0" gps-entity-place="longitude: -79.428322; latitude: 43.643208;" color="orange"></a-box>
        <a-box rotation="0 0 0" scale="1.0 1.0 1.0" gps-entity-place="longitude: -79.428322; latitude: 43.643210;"  color="yellow"></a-box>
        <a-box rotation="0 0 0" scale="1.0 1.0 1.0" gps-entity-place="longitude: -79.428322; latitude: 43.643212;"  color="green"></a-box>
        <a-box rotation="0 0 0" scale="1.0 1.0 1.0" gps-entity-place="longitude: -79.428322; latitude: 43.643214;"  color="blue"></a-box>

        <a-box rotation="0 0 0" scale="1.0 1.0 1.0" gps-entity-place="longitude: -79.442877; latitude: 43.668858;"  color="yellow"></a-box>
        <a-box rotation="0 0 0" scale="1.0 1.0 1.0" gps-entity-place="longitude: -79.442875; latitude: 43.668856;"  color="yellow"></a-box>
        <a-box rotation="0 0 0" scale="1.0 1.0 1.0" gps-entity-place="longitude: -79.442873; latitude: 43.668854;"  color="yellow"></a-box>-->
        <a-box rotation="0 0 0" scale="10.0 10.0 10.0" gps-entity-place="longitude: -79.391825; latitude: 43.653010;"  color="green"></a-box>
        <a-box rotation="0 0 0" scale="10.0 10.0 10.0" gps-entity-place="longitude: -79.390887; latitude: 43.654455;"  color="red"></a-box>
	</a-scene>
</body>
<footer>
    <script type="text/javascript">
        
        var scene = document.querySelector('a-scene');

        if (scene.hasLoaded) {
          run();
        } else {
          scene.addEventListener('loaded', run);
        }

        function run () {
          
        }


        window.addEventListener("deviceorientation", handleOrientation, true);
        function handleOrientation(event) {
          var absolute = event.absolute;
          var alpha    = event.alpha;
          var beta     = event.beta;
          var gamma    = event.gamma;

          var resultStr = "abs: " + absolute + " alp: " + alpha + " bet: " + beta + " gam: " + gamma;
          console.log(resultStr);
            var q = document.getElementById("extra");
          q.innerHTML = resultStr;
          // Do stuff with the new orientation data
        }

        setInterval(oneSecondFunction, 1000);
       
        var i = 0;
        

        function oneSecondFunction() {
            i++;
            const distanceMsg = document.querySelector('[gps-entity-place]').getAttribute('distanceMsg');
            //console.log(distanceMsg);   // "890 meters"
           
            if (distanceMsg) {
                var p = document.getElementById("dist");
                p.innerHTML = distanceMsg + " away [" + i + "]";
            }
        }

        window.onload = function () {
          document
            .addEventListener("gps-camera-update-position", function () {
              // here you can change also a-scene or a-entity properties, like
              // changing your 3D model source, size, position and so on
              // or you can just open links, trigger actions...
                var p = document.getElementById("dist");
                p.innerHTML = "Position changed!";
            });
        };

    </script>
</footer>

